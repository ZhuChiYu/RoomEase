# ğŸ”§ ç½‘ç»œè¿æ¥ä¿®å¤æ€»ç»“

## âŒ åŸé—®é¢˜

ç§»åŠ¨ç«¯æ— æ³•è¿æ¥åç«¯APIï¼ŒæŠ¥ `Network Error`ï¼š
```
ğŸ“¤ APIè¯·æ±‚: {"baseURL": "http://localhost:4000", ...}
âš ï¸ è‡ªåŠ¨ç™»å½•å¤±è´¥: Network Error
```

## ğŸ¯ æ ¹æœ¬åŸå› 

1. **ç§»åŠ¨è®¾å¤‡/æ¨¡æ‹Ÿå™¨ä¸Š `localhost` æŒ‡å‘è®¾å¤‡æœ¬èº«**ï¼Œè€Œä¸æ˜¯å¼€å‘æœºå™¨
2. **åç«¯æœåŠ¡åªç›‘å¬ localhost**ï¼Œä¸æ¥å—å±€åŸŸç½‘è¿æ¥

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. è·å–å¼€å‘æœºå™¨å±€åŸŸç½‘IP
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1 | awk '{print $2}' | head -1
# ç»“æœ: 192.168.31.221
```

### 2. æ›´æ–°ç§»åŠ¨ç«¯APIé…ç½®
**æ–‡ä»¶**: `apps/mobile/app/config/environment.ts`
```typescript
BASE_URL: isDev 
  ? 'http://192.168.31.221:4000' // âœ… ä½¿ç”¨å±€åŸŸç½‘IP
  : 'https://api.roomease.com'
```

### 3. æ›´æ–°åç«¯ç›‘å¬é…ç½®
**æ–‡ä»¶**: `services/api-gateway/src/main.ts`
```typescript
await app.listen(port, '0.0.0.0') // âœ… ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
```

### 4. ä¿®æ­£ç™»å½•å‡­æ®
**æ–‡ä»¶**: `apps/mobile/app/_layout.tsx`
```typescript
await apiClient.login('admin@demo.com', '123456') // âœ… æ­£ç¡®çš„å‡­æ®
```

## ğŸ“ é»˜è®¤ç™»å½•å‡­æ®

- **é‚®ç®±**: `admin@demo.com`
- **å¯†ç **: `123456`
- **ç§Ÿæˆ·**: `demo`
- **ç‰©ä¸šID**: `demo-property`

## ğŸ”„ é‡å¯æ­¥éª¤

### åç«¯æœåŠ¡
åç«¯å·²è‡ªåŠ¨é‡å¯ï¼Œç›‘å¬åœ¨ï¼š
- âœ… æœ¬åœ°: `http://localhost:4000`
- âœ… å±€åŸŸç½‘: `http://192.168.31.221:4000`

### ç§»åŠ¨åº”ç”¨
åœ¨ **Expo ç»ˆç«¯** æŒ‰é”®é‡æ–°åŠ è½½ï¼š
```bash
r  # æˆ– Shift+r æ¸…é™¤ç¼“å­˜
```

## ğŸ“Š é¢„æœŸæ—¥å¿—

### âœ… æˆåŠŸçš„è‡ªåŠ¨ç™»å½•æ—¥å¿—
```
ğŸ” ä½¿ç”¨åç«¯APIï¼Œè‡ªåŠ¨ç™»å½•ä¸­...
ğŸ“¤ APIè¯·æ±‚: {
  method: 'POST',
  url: '/auth/login',
  baseURL: 'http://192.168.31.221:4000',
  fullURL: 'http://192.168.31.221:4000/auth/login',
  data: { email: 'admin@demo.com', password: '123456' },
  hasToken: false
}
ğŸ“¥ APIå“åº”: {
  status: 200,
  statusText: 'OK',
  data: {
    accessToken: 'eyJhbGc...',
    refreshToken: 'eyJhbGc...',
    user: { id: '...', email: 'admin@demo.com', ... }
  }
}
âœ… è‡ªåŠ¨ç™»å½•æˆåŠŸ: { accessToken: '...', ... }
```

### âœ… æˆåŠŸçš„åˆ›å»ºé¢„è®¢æ—¥å¿—
```
ğŸ“ [CreateOrder] åˆ›å»ºé¢„è®¢: { roomId: '1-2 3105', ... }
ğŸŒ [CreateOrder] é€šè¿‡APIåˆ›å»ºé¢„è®¢...
ğŸ“¤ APIè¯·æ±‚: {
  method: 'POST',
  url: '/reservations',
  baseURL: 'http://192.168.31.221:4000',
  data: { propertyId: 'demo-property', ... },
  hasToken: true
}
ğŸ“¥ APIå“åº”: {
  status: 201,
  data: { id: '...', roomId: '...', ... }
}
âœ… [CreateOrder] APIè¿”å›: { id: '...', ... }
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

1. **é‡æ–°åŠ è½½App** (åœ¨Expoç»ˆç«¯æŒ‰ `r`)
2. **è§‚å¯Ÿå¯åŠ¨æ—¥å¿—** - åº”è¯¥çœ‹åˆ°è‡ªåŠ¨ç™»å½•æˆåŠŸ
3. **åˆ›å»ºä¸€ä¸ªé¢„è®¢** - ç‚¹å‡»æ—¥å†å•å…ƒæ ¼ï¼Œå¡«å†™ä¿¡æ¯æäº¤
4. **æŸ¥çœ‹APIæ—¥å¿—** - åº”è¯¥çœ‹åˆ°å®Œæ•´çš„è¯·æ±‚/å“åº”æ—¥å¿—

## ğŸ” éªŒè¯åç«¯API

åœ¨æµè§ˆå™¨æˆ–å‘½ä»¤è¡Œæµ‹è¯•ï¼š

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥ï¼ˆè™½ç„¶è¿™ä¸ªè·¯ç”±ä¸å­˜åœ¨ï¼Œä½†èƒ½è¯æ˜æœåŠ¡å™¨å“åº”ï¼‰
curl http://192.168.31.221:4000/api/health

# æµ‹è¯•ç™»å½•
curl -X POST http://192.168.31.221:4000/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@demo.com","password":"123456"}'

# åœ¨æµè§ˆå™¨è®¿é—®APIæ–‡æ¡£
# http://192.168.31.221:4000/docs
```

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ç§»åŠ¨åº”ç”¨åº”è¯¥å¯ä»¥æ­£å¸¸è¿æ¥åç«¯APIäº†ï¼


