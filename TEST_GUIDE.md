# ğŸ§ª RoomEase æµ‹è¯•æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å¯åŠ¨åç«¯æœåŠ¡

```bash
./start-backend.sh
```

ç­‰å¾…çœ‹åˆ°ï¼š
```
âœ… APIæœåŠ¡å·²å¯åŠ¨
ğŸ“– API æ–‡æ¡£: http://localhost:4000/docs
```

### 2ï¸âƒ£ å¯åŠ¨ç§»åŠ¨ç«¯App

```bash
./start-mobile.sh
```

æˆ–è€…æ‰‹åŠ¨å¯åŠ¨ï¼š
```bash
cd apps/mobile
pnpm start
```

### 3ï¸âƒ£ æµ‹è¯•æ–¹å¼

#### æ–¹å¼A: ä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd apps/mobile
node test-api.js
```

#### æ–¹å¼B: ä½¿ç”¨Expo Goæ‰«ç æµ‹è¯•

1. åœ¨æ‰‹æœºä¸Šå®‰è£… **Expo Go** App
2. æ‰«æç»ˆç«¯æ˜¾ç¤ºçš„äºŒç»´ç 
3. Appä¼šè‡ªåŠ¨åŠ è½½å¹¶è¿è¡Œ

#### æ–¹å¼C: ä½¿ç”¨æ¨¡æ‹Ÿå™¨

```bash
# iOSæ¨¡æ‹Ÿå™¨
cd apps/mobile
pnpm ios

# Androidæ¨¡æ‹Ÿå™¨
cd apps/mobile
pnpm android
```

## ğŸ“± ç§»åŠ¨ç«¯æµ‹è¯•è¦ç‚¹

### ç™»å½•åŠŸèƒ½æµ‹è¯•

**æµ‹è¯•è´¦å·**:
- é‚®ç®±: `admin@demo.com`
- å¯†ç : `123456`

**é¢„æœŸæ—¥å¿—**:
```
ğŸ“¤ APIè¯·æ±‚: {
  method: 'POST',
  url: '/auth/login',
  fullURL: 'http://localhost:4000/auth/login',
  data: { email: 'admin@demo.com', password: '123456' }
}

ğŸ“¥ APIå“åº”: {
  status: 200,
  data: {
    accessToken: 'eyJ...',
    refreshToken: 'eyJ...',
    user: { name: 'ç®¡ç†å‘˜', role: 'OWNER' }
  }
}
```

### æˆ¿é—´åˆ—è¡¨æµ‹è¯•

**æ“ä½œ**: è¿›å…¥é¦–é¡µæˆ–æˆ¿é—´ç®¡ç†é¡µé¢

**é¢„æœŸæ—¥å¿—**:
```
ğŸ“¤ APIè¯·æ±‚: {
  method: 'GET',
  url: '/rooms',
  params: { propertyId: 'demo-property' }
}

ğŸ“¥ APIå“åº”: {
  status: 200,
  data: [
    { id: '...', name: 'è±ªåå¤§åºŠæˆ¿', code: 'A101', basePrice: '299' },
    { id: '...', name: 'æ ‡å‡†åŒäººæˆ¿', code: 'A102', basePrice: '199' },
    { id: '...', name: 'å®¶åº­å¥—æˆ¿', code: 'B201', basePrice: '399' }
  ]
}
```

### é¢„è®¢ç®¡ç†æµ‹è¯•

**æ“ä½œ**: åˆ›å»ºæ–°é¢„è®¢

**é¢„æœŸæ—¥å¿—**:
```
ğŸ“¤ APIè¯·æ±‚: {
  method: 'POST',
  url: '/reservations',
  data: {
    propertyId: 'demo-property',
    roomId: '...',
    checkInDate: '2025-10-13',
    checkOutDate: '2025-10-15',
    guestName: 'å¼ ä¸‰',
    guestPhone: '13800138000',
    guestCount: 2,
    childCount: 0,
    roomRate: 299,
    totalAmount: 598
  }
}

ğŸ“¥ APIå“åº”: {
  status: 201,
  data: {
    id: '...',
    status: 'CONFIRMED',
    guestName: 'å¼ ä¸‰',
    totalAmount: '598'
  }
}
```

### æ—¥å†æ•°æ®æµ‹è¯•

**æ“ä½œ**: æŸ¥çœ‹æ—¥å†è§†å›¾

**é¢„æœŸæ—¥å¿—**:
```
ğŸ“¤ APIè¯·æ±‚: {
  method: 'GET',
  url: '/calendar',
  params: {
    propertyId: 'demo-property',
    startDate: '2025-10-08',
    endDate: '2025-11-07'
  }
}

ğŸ“¥ APIå“åº”: {
  status: 200,
  data: {
    rooms: [...],
    reservations: [...],
    overrides: []
  }
}
```

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: çœ‹ä¸åˆ°APIæ—¥å¿—

**æ£€æŸ¥ç‚¹**:
1. ç¡®è®¤ `__DEV__` ä¸º trueï¼ˆå¼€å‘æ¨¡å¼ï¼‰
2. æŸ¥çœ‹Metro Bundleræ§åˆ¶å°
3. æ£€æŸ¥React Native Debugger

### é—®é¢˜2: APIè¿æ¥å¤±è´¥

**æ’æŸ¥æ­¥éª¤**:

```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:4000/auth/profile

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®
lsof -i :4000

# 3. æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f /tmp/api-gateway.log
```

### é—®é¢˜3: 401 æœªæˆæƒé”™è¯¯

**åŸå› **: Tokenè¿‡æœŸæˆ–æ— æ•ˆ

**è§£å†³**:
1. é‡æ–°ç™»å½•è·å–æ–°Token
2. æ£€æŸ¥Tokenæ˜¯å¦æ­£ç¡®ä¿å­˜åœ¨AsyncStorage
3. æŸ¥çœ‹æ˜¯å¦è§¦å‘äº†è‡ªåŠ¨åˆ·æ–°

**é¢„æœŸæ—¥å¿—**:
```
âŒ APIé”™è¯¯: { status: 401, message: 'Unauthorized' }
ğŸ”„ Tokenåˆ·æ–°æˆåŠŸï¼Œé‡è¯•è¯·æ±‚
```

### é—®é¢˜4: çœŸæœºæµ‹è¯•è¿æ¥ä¸ä¸Š

**è§£å†³æ–¹æ¡ˆ**:

1. ä¿®æ”¹APIåœ°å€ä¸ºå±€åŸŸç½‘IP:
```typescript
// apps/mobile/app/config/environment.ts
export const API_CONFIG = {
  BASE_URL: 'http://192.168.x.x:4000'  // æ›¿æ¢ä¸ºä½ çš„ç”µè„‘IP
}
```

2. æŸ¥çœ‹ç”µè„‘IP:
```bash
# macOS
ifconfig | grep "inet "

# æˆ–è€…
ipconfig getifaddr en0
```

## ğŸ“Š æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½æµ‹è¯•

- [ ] ç™»å½•æˆåŠŸ
- [ ] è·å–ç”¨æˆ·ä¿¡æ¯
- [ ] æŸ¥çœ‹æˆ¿é—´åˆ—è¡¨
- [ ] æŸ¥çœ‹æˆ¿é—´è¯¦æƒ…
- [ ] æŸ¥çœ‹é¢„è®¢åˆ—è¡¨
- [ ] æŸ¥çœ‹æ—¥å†æ•°æ®
- [ ] æŸ¥çœ‹ç»Ÿè®¡æ•°æ®

### é¢„è®¢æµç¨‹æµ‹è¯•

- [ ] åˆ›å»ºæ–°é¢„è®¢
- [ ] ä¿®æ”¹é¢„è®¢ä¿¡æ¯
- [ ] å–æ¶ˆé¢„è®¢
- [ ] åŠç†å…¥ä½
- [ ] åŠç†é€€æˆ¿

### æˆ¿é—´ç®¡ç†æµ‹è¯•

- [ ] æŸ¥çœ‹æˆ¿é—´å¯ç”¨æ€§
- [ ] æ›´æ–°æˆ¿é—´ä¿¡æ¯
- [ ] å…³æˆ¿æ“ä½œ
- [ ] å–æ¶ˆå…³æˆ¿

### é”™è¯¯å¤„ç†æµ‹è¯•

- [ ] ç½‘ç»œé”™è¯¯æç¤º
- [ ] Tokenè¿‡æœŸè‡ªåŠ¨åˆ·æ–°
- [ ] è¡¨å•éªŒè¯
- [ ] å†²çªæ£€æµ‹ï¼ˆæ—¥æœŸé‡å ï¼‰

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### å“åº”æ—¶é—´

æµ‹è¯•å¹¶è®°å½•å„APIçš„å“åº”æ—¶é—´ï¼š

```
ç™»å½•: ____ms
è·å–åˆ—è¡¨: ____ms
åˆ›å»ºé¢„è®¢: ____ms
è·å–æ—¥å†: ____ms
```

### å¹¶å‘æµ‹è¯•

åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç«æ€æ¡ä»¶ã€‚

## ğŸ” æ—¥å¿—åˆ†æ

### æ­£å¸¸æµç¨‹æ—¥å¿—

```
ğŸ“¤ APIè¯·æ±‚: POST /auth/login
ğŸ“¥ APIå“åº”: 200 - ç™»å½•æˆåŠŸ
ğŸ“¤ APIè¯·æ±‚: GET /rooms
ğŸ“¥ APIå“åº”: 200 - 3ä¸ªæˆ¿é—´
ğŸ“¤ APIè¯·æ±‚: GET /reservations
ğŸ“¥ APIå“åº”: 200 - 2ä¸ªé¢„è®¢
```

### é”™è¯¯æµç¨‹æ—¥å¿—

```
ğŸ“¤ APIè¯·æ±‚: POST /reservations
âŒ APIé”™è¯¯: {
  status: 400,
  message: 'è¯¥æ—¶é—´æ®µæˆ¿é—´å·²è¢«é¢„è®¢'
}
```

### Tokenåˆ·æ–°æ—¥å¿—

```
ğŸ“¤ APIè¯·æ±‚: GET /rooms
âŒ APIé”™è¯¯: 401 - Unauthorized
ğŸ”„ Tokenåˆ·æ–°æˆåŠŸï¼Œé‡è¯•è¯·æ±‚
ğŸ“¤ APIè¯·æ±‚: GET /rooms
ğŸ“¥ APIå“åº”: 200 - æˆåŠŸ
```

## ğŸ’¡ æµ‹è¯•æŠ€å·§

### 1. ä½¿ç”¨React Native Debugger

```bash
# å®‰è£…
brew install react-native-debugger

# å¯åŠ¨
open "rndebugger://set-debugger-loc?host=localhost&port=19000"
```

### 2. ä½¿ç”¨Flipper

æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ã€æ—¥å¿—ã€AsyncStorageç­‰

### 3. ä½¿ç”¨Postman

å¯ä»¥å…ˆç”¨Postmanæµ‹è¯•APIï¼Œå†åœ¨Appä¸­é›†æˆ

### 4. æŸ¥çœ‹æ•°æ®åº“

```bash
# è¿æ¥æ•°æ®åº“
psql -h localhost -p 5434 -U postgres -d roomease

# æŸ¥çœ‹é¢„è®¢
SELECT * FROM reservations;

# æŸ¥çœ‹æˆ¿é—´
SELECT * FROM rooms;
```

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

### æµ‹è¯•ç¯å¢ƒ

- åç«¯: http://localhost:4000 âœ…
- ç§»åŠ¨ç«¯: Expo Go / iOSæ¨¡æ‹Ÿå™¨
- æµ‹è¯•è´¦å·: admin@demo.com
- æµ‹è¯•æ—¶é—´: YYYY-MM-DD HH:mm

### æµ‹è¯•ç»“æœ

| åŠŸèƒ½ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| ç™»å½• | âœ… | æ­£å¸¸ |
| æˆ¿é—´åˆ—è¡¨ | âœ… | 3ä¸ªæˆ¿é—´ |
| åˆ›å»ºé¢„è®¢ | âœ… | æ­£å¸¸ |
| ... | ... | ... |

### å‘ç°çš„é—®é¢˜

1. é—®é¢˜æè¿°
2. å¤ç°æ­¥éª¤
3. é¢„æœŸç»“æœ
4. å®é™…ç»“æœ
5. æ—¥å¿—ä¿¡æ¯

### å»ºè®®

1. ...
2. ...

## ğŸš€ ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼Œå¯ä»¥ï¼š

1. å®Œå–„UIç•Œé¢
2. æ·»åŠ æ›´å¤šä¸šåŠ¡åŠŸèƒ½
3. ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
4. å‡†å¤‡å‘å¸ƒ

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰


